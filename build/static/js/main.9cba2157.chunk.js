(this.webpackJsonpfox=this.webpackJsonpfox||[]).push([[0],{21:function(e,t,n){e.exports=n(37)},26:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(18),l=n.n(c),o=n(10),u=n(8),s=(n(26),n(1)),i=n.n(s),m=n(3),p=n(6),f="https://wf-challenge-yn8dgzymk9.herokuapp.com/api/v1/posts",h=function(){var e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(f);case 3:return t=e.sent,e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(0),new Error("An error occured while getting the posts: ".concat(e.t0));case 12:case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(m.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(f,"/").concat(t));case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(0),new Error("An error occured while getting the post: ".concat(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(f,"/").concat(t),{method:"DELETE"});case 3:return e.abrupt("return",{error:!1});case 6:throw e.prev=6,e.t0=e.catch(0),new Error("An error occured while deleating the post: ".concat(e.t0));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(m.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(f,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(0),new Error("An error occured while creating the post: ".concat(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(m.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(f,"/").concat(t.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(0),new Error("An error occured while editing the post: ".concat(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(a.useState)([]),t=Object(p.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)(!1),o=Object(p.a)(l,2),s=o[0],f=o[1],d=Object(u.f)(),v=function(){var e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h();case 3:t=e.sent,c(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),f(!0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(m.a)(i.a.mark((function e(){var t,n=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"",e.prev=1,e.next=4,b(t);case 4:v(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),f(!0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){v()}),[]),r.a.createElement("div",{className:"posts"},s?r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"An error occurred. Try again later."):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-primary",onClick:function(){return d.push("/create")}},"Create new entry")),r.a.createElement("br",null),r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"#"),r.a.createElement("th",{scope:"col"},"Title"),r.a.createElement("th",{scope:"col"},"Content"),r.a.createElement("th",{scope:"col"}),r.a.createElement("th",{scope:"col"}))),r.a.createElement("tbody",null,n.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("th",{scope:"row"},e.id),r.a.createElement("td",null,e.title),r.a.createElement("td",null,e.content),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";d.push("/edit/".concat(e))}(e.id)}},"Edit")),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return E(e.id)}},"Delete")))}))))))},w=n(12),j=n(13),O={title:"",content:"",lat:"",long:"",image_url:""},k=function(e,t){var n=t.field,a=t.value;return Object(j.a)({},e,Object(w.a)({},n,a))},y=function(){var e=Object(a.useReducer)(k,O),t=Object(p.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!0),l=Object(p.a)(c,2),o=l[0],u=l[1];return{state:n,dispatch:r,disabled:o,onChange:function(e){r({field:e.target.name,value:e.target.value})},checkDisabled:function(){var e=Object.values(n).indexOf("")>=0;u(e)}}},x=function(e){var t=e.post,n=t.title,a=t.content,c=t.lat,l=t.long,o=t.image_url,s=e.onChange,i=e.onSubmit,m=e.disabled,p=Object(u.f)();return r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Title"),r.a.createElement("input",{className:"form-control",value:n,name:"title",onChange:s})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Content"),r.a.createElement("input",{className:"form-control",value:a,name:"content",onChange:s})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Latitude"),r.a.createElement("input",{className:"form-control",value:c,name:"lat",onChange:s})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Longitude"),r.a.createElement("input",{className:"form-control",value:l,name:"long",onChange:s})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Image url"),r.a.createElement("input",{className:"form-control",value:o,name:"image_url",onChange:s})),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-11"},r.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(){return p.goBack()}},"Back")),r.a.createElement("div",{className:"col-1"},r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:i,disabled:m},"Submit")))))},N=function(){var e=y(),t=e.state,n=e.disabled,c=e.onChange,l=e.checkDisabled,o=Object(a.useState)(!1),s=Object(p.a)(o,2),f=s[0],h=s[1],d=Object(u.f)(),b=function(){var e=Object(m.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v(t);case 3:d.goBack(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),h(!0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){l()}),[t]),r.a.createElement("div",{className:"posts"},r.a.createElement("h4",null,"Create"),f?r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"An error occurred while your post was submitted. Try again later."):r.a.createElement(x,{post:t,onChange:c,onSubmit:b,disabled:n}))},C=Object(u.g)((function(e){var t=e.match.params.id,n=y(),c=n.state,l=n.disabled,o=n.dispatch,s=n.onChange,f=n.checkDisabled,h=Object(a.useState)(!1),b=Object(p.a)(h,2),v=b[0],g=b[1],w=Object(u.f)(),k=function(){var e=Object(m.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E(Object(j.a)({},c,{id:t}));case 3:w.goBack(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),g(!0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){(function(){var e=Object(m.a)(i.a.mark((function e(){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d(t);case 3:for(a in n=e.sent)O.hasOwnProperty(a)&&o({field:a,value:n[a]});e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),g(!0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(a.useEffect)((function(){f()}),[c]),r.a.createElement("div",{className:"posts"},r.a.createElement("h4",null,"Edit"),v?r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"An error occurred while your post was submitted. Try again later."):r.a.createElement(r.a.Fragment,null,r.a.createElement("label",null,"Tumbnail"),r.a.createElement("br",null),r.a.createElement("img",{alt:"post",src:c.image_url,className:"img-thumbnail",height:"100",width:"100",onError:function(){o({field:"image_url",value:"https://picsum.photos/100/100"})}}),r.a.createElement(x,{post:c,onChange:s,onSubmit:k,disabled:l})))})),S=function(){return r.a.createElement(o.a,null,r.a.createElement("div",null,r.a.createElement(u.c,null,r.a.createElement(u.a,{path:"/create"},r.a.createElement(N,null)),r.a.createElement(u.a,{path:"/edit/:id"},r.a.createElement(C,null)),r.a.createElement(u.a,{path:"/"},r.a.createElement(g,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(36);l.a.render(r.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[21,1,2]]]);
//# sourceMappingURL=main.9cba2157.chunk.js.map